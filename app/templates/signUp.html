{% extends "index.html" %} {% block page_content %}

<div class="container center-align">
  <div class="z-depth-4 grey lighten-2 row" id="registerCard">
    <div class='row'>
      <div class='col s12'>
      </div>
    </div>

    <div class='row'>
      <div class='input-field col s12'>
        <input class='validate' type='email' name='email' id='email' />
        <label for='email'>Enter your email</label>
      </div>
    </div>

    <div class="row">
      <div class="input-field col s12">
        <input type="text" id="username" class="validate" name="username" />
        <label for="username">Enter your username</label>
      </div>
    </div>

    <div class='row'>
      <div class='input-field col s12'>
        <input class='validate' type='password' name='password' id='password' />
        <label for='password'>Enter your password</label>
      </div>
    </div>

    <div class='row'>
      <div class='input-field col s12'>
        <input class='validate' type='password' name="password-confirm" id='password-confirm' />
        <label for='password-confirm'>Password Confirmation</label>
      </div>
    </div>


    <br />
    <center>
      <div class='row center-align'>
        <button class='col s12 btn btn-large waves-effect red darken-2 black-text' onclick="submitForm()">
            Register</button>
      </div>
    </center>
  </div>
</div>

<script>
  function submitForm() {
    const emailInput = $('#email').val();
    const usernameInput = $('#username').val();
    const passwordInput = $('#password').val()
    const passwordConfirm = $('#password-confirm').val()

    if(passwordInput != passwordConfirm) {
      $('#password').val('');
      $('#password-confirm').val('');
      alert("Passwords do not match");
    } else {
      $.post('/registerUser',
              {
                email: emailInput,
                username: usernameInput,
                password: passwordInput
              },
              function(data) {
                console.log(data)
              })
    }
  }

</script>

<style>
  #registerCard {
    /*display: inline-block;*/
    padding: 32px 80px 20px 80px;
    border: 1px solid #EEE;
  }
</style>

{% endblock %}
